'use strict';var e=require('commander'),n=require('path'),i=require("fs"),t=require("./config/common"),o=t.project_dir,r=t.API_LEVEL,c=t.SDK_VERSION;t.exec,t.execSync,t.makeDirs;e.version(c).usage("[options] <packageName>").option("-i, --id <pluginId>","\u63d2\u4ef6\u7684ID").option("-m, --models <models>","\u56fa\u4ef6 model","").description("\u751f\u6210\u9879\u76ee").parse(process.argv);try{!(function(){var t=e.args[0],a=n.join(o,"projects",t);if(i.existsSync(a))throw e.outputHelp(),"the package is exist or invalid package name";var s=e.id;if(!s||!/^\d{3,}$/.test(s))throw e.outputHelp(),"the valid plugin id is need";i.mkdirSync(a),i.writeFileSync(n.join(a,"project.json"),'{\n        "plugin_id": '+s+',\n        "models": "'+(e.models||'')+'",\n        "package_path": "'+t+'",\n        "min_sdk_api_level":'+r+',\n        "developer_id": "'+(e.developer||'')+'",\n        "version_code":1\n    }'),i.writeFileSync(n.join(a,"package.json"),'{\n        "name": "project-'+t.replace(/[.]/g,'-')+'",\n        "version": "'+c+'",\n        "scripts":{\n            "start":"node ../../bin/runProject.js"\n        },\n        "dependencies":{\n            \n        }\n    }'),i.writeFileSync(n.join(a,"index.ios.js"),'import "./index.js";'),i.writeFileSync(n.join(a,"index.js"),'\n    import React from \'react\';\n    import { API_LEVEL, Package, Device, Service, Host } from \'miot\';\n    import { PackageEvent, DeviceEvent } from \'miot\';\n    import { View, Text } from \'react-native\';\n\n    class App extends React.Component {\n        render() {\n            return (\n            <View style={{ flex: 1, justifyContent: \'center\', alignItems: \'center\' }}>\n            <Text>hello, this is a plugin project of MIOT</Text>\n            <Text>API_LEVEL:{API_LEVEL}</Text>\n            <Text>{Package.packageName}</Text>\n            <Text>models:{Package.models}</Text>\n            </View>\n            )\n        }\n    }\n    Package.entry(App, () => {\n        \n    })\n    '),i.mkdirSync(n.join(a,"resources")),i.mkdirSync(n.join(a,"build"))})()}catch(e){console.log(e)}