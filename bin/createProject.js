'use strict';var e=require('commander'),n=require('path'),i=require("fs"),r=require("./config/common"),o=r.project_dir,t=r.API_LEVEL,s=r.SDK_VERSION;r.exec,r.execSync,r.makeDirs;e.version(s).usage("[options] <packageName>").option("-i, --id <pluginId>","\u63d2\u4ef6\u7684ID").option("-m, --models <models>","\u56fa\u4ef6 model","").description("\u751f\u6210\u9879\u76ee").parse(process.argv);var c=e.args[0],p=n.join(o,"projects",c);if(i.existsSync(p))throw e.outputHelp(),"the package is exist or invalid package name";var a=e.id;if(!a||!/^\\d{3,}$/.test(a))throw e.outputHelp(),"the valid plugin id is need";i.mkdirSync(p),i.writeFileSync(n.join(p,"project.json"),'{\n    "plugin_id": "'+a+'",\n    "models": "'+(e.models||'')+'",\n    "package_path": "'+c+'",\n    "min_sdk_api_level":'+t+',\n    "developer_id": "'+(e.developer||'')+'",\n    "version_code":1\n}'),i.writeFileSync(n.join(p,"package.json"),'{\n    "name": "project-'+c.replace(/[.]/g,'-')+'",\n    "version": "'+s+'",\n    "scripts":{\n        "start":"node ../../bin/runProject.js"\n    },\n    "dependencies":{\n        \n    }\n}'),i.writeFileSync(n.join(p,"index.ios.js"),'import "./index.js";'),i.writeFileSync(n.join(p,"index.js"),'\n    import React from \'react\';\n    import {Package,Device,Service,Host} from \'miot\';\n    import {PackageEvent, DeviceEvent} from \'miot\';\n\n    class App extends React.Component{\n        render(){\n            return "hello, this is a plugin project of MIOT";\n        }\n    }\n    Package.entry(App, ()=>{\n\n    })\n'),i.mkdirSync(n.join(p,"resources")),i.mkdirSync(n.join(p,"build"));