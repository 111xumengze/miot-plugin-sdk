'use strict';var e=require('commander'),n=require('path'),i=require("fs"),o=require("./config/common"),r=o.project_dir,t=o.API_LEVEL,c=o.SDK_VERSION;o.exec,o.execSync,o.makeDirs;e.version(c).usage("[options] <packageName>").option("-i, --id <pluginId>","\u63d2\u4ef6\u7684ID").option("-m, --models <models>","\u56fa\u4ef6 model","").description("\u751f\u6210\u9879\u76ee").parse(process.argv);try{!(function(){var o=e.args[0],s=n.join(r,"projects",o);if(i.existsSync(s))throw e.outputHelp(),"the package is exist or invalid package name";var a=e.id;if(!a||!/^\d{3,}$/.test(a))throw e.outputHelp(),"the valid plugin id is need";i.mkdirSync(s),i.writeFileSync(n.join(s,"project.json"),'{\n        "plugin_id": '+a+',\n        "models": "'+(e.models||'')+'",\n        "package_path": "'+o+'",\n        "min_sdk_api_level":'+t+',\n        "developer_id": "'+(e.developer||'')+'",\n        "version_code":1\n    }'),i.writeFileSync(n.join(s,"package.json"),'{\n        "name": "project-'+o.replace(/[.]/g,'-')+'",\n        "version": "'+c+'",\n        "scripts":{\n            "start":"node ../../bin/runProject.js"\n        },\n        "dependencies":{\n            \n        }\n    }'),i.writeFileSync(n.join(s,"index.ios.js"),'import "./index.js";'),i.writeFileSync(n.join(s,"index.js"),'\n        import React from \'react\';\n        import {Package,Device,Service,Host} from \'miot\';\n        import {PackageEvent, DeviceEvent} from \'miot\';\n    \n        class App extends React.Component{\n            render(){\n                return "hello, this is a plugin project of MIOT";\n            }\n        }\n        Package.entry(App, ()=>{\n    \n        })\n    '),i.mkdirSync(n.join(s,"resources")),i.mkdirSync(n.join(s,"build"))})()}catch(e){console.log(e)}